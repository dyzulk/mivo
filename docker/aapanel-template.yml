version: '3.8'

services:
  mivo:
    image: ghcr.io/mivodev/mivo:${VERSION:-latest}
    container_name: ${CONTAINER_NAME:-mivo}
    restart: unless-stopped
    ports:
      - "${HOST_IP:-0.0.0.0}:${APP_PORT:-8085}:80"
    volumes:
      # Database & Sessions
      - ${APP_PATH:-.}/mivo_data:/var/www/html/app/Database
      
      # Custom Logos
      - ${APP_PATH:-.}/mivo_logos:/var/www/html/public/assets/img/logos
      
      # Environment file (Optional - mapped from host)
      # - ${APP_PATH:-.}/.env:/var/www/html/.env
      
    environment:
      - APP_ENV=${APP_ENV:-production}
      - APP_DEBUG=${APP_DEBUG:-false}
      - TZ=${TZ:-Asia/Jakarta}
      
    deploy:
      resources:
        limits:
          cpus: '${CPUS:-1.0}'
          memory: ${MEMORY_LIMIT:-512M}

    networks:
      - mivo_net

networks:
  mivo_net:
    driver: bridge
